{"ast":null,"code":"import { makeAutoObservable, reaction, autorun } from \"mobx\";\nimport api from \"../services/API\";\nexport class Store {\n  constructor() {\n    this.searchDisposer = void 0;\n    this.movies = [];\n    this.loading = false;\n    this.search = '';\n    this.adultMovie = false;\n\n    this.fetchMovies = async () => {\n      if (this.loading) {\n        return;\n      }\n\n      ;\n      this.setLoading(true);\n\n      try {\n        const movies = await api.getMovies(this.search);\n        this.setMovies(movies);\n      } catch (e) {\n        console.error(e);\n      } finally {\n        this.setLoading(false);\n      }\n\n      ;\n    };\n\n    this.chooseF = 0;\n    this.chooseA = 0;\n    this.chooseD = 0;\n    makeAutoObservable(this);\n    this.searchDisposer = reaction(() => this.search, () => this.fetchMovies());\n    autorun(() => {\n      /* if (this.search.includes(\"A\")) {\n           console.log(\"Escolheu a letra A\");\n           this.chooseA = this.chooseA + 1;\n       } else if(this.search.includes(\"D\")){ \n           console.log(\"Escolheu a letra D\")\n           this.chooseD = this.chooseD + 1;\n       } else if (this.search.includes(\"F\")) {  \n           console.log(\"Escolheu a letra F\")\n           this.chooseF = this.chooseF + 1;\n       } */\n    });\n  }\n\n  setSearch(search) {\n    this.search = search;\n  }\n\n  setMovies(movies) {\n    this.movies = movies;\n  }\n\n  setLoading(loading) {\n    this.loading = loading;\n  }\n\n  dispose() {\n    var _this$searchDisposer;\n\n    (_this$searchDisposer = this.searchDisposer) === null || _this$searchDisposer === void 0 ? void 0 : _this$searchDisposer.call(this);\n  }\n\n  get top5Movies() {\n    return this.movies.slice().sort((l, r) => l.popularity - r.popularity).slice(0, 4);\n  }\n\n  get adult() {\n    return this.movies.filter(movie => movie.adult === this.adultMovie);\n  }\n\n}\n;","map":{"version":3,"sources":["/home/manoel/Codigos/treinamento/aulas/05/reactmovies/src/Home/store.ts"],"names":["makeAutoObservable","reaction","autorun","api","Store","constructor","searchDisposer","movies","loading","search","adultMovie","fetchMovies","setLoading","getMovies","setMovies","e","console","error","chooseF","chooseA","chooseD","setSearch","dispose","top5Movies","slice","sort","l","r","popularity","adult","filter","movie"],"mappings":"AAAA,SAASA,kBAAT,EAAgDC,QAAhD,EAA0DC,OAA1D,QAAyE,MAAzE;AAEA,OAAOC,GAAP,MAAgB,iBAAhB;AAEA,OAAO,MAAMC,KAAN,CAAY;AAEfC,EAAAA,WAAW,GAAG;AAAA,SADPC,cACO;AAAA,SAmBPC,MAnBO,GAmBiB,EAnBjB;AAAA,SAoBPC,OApBO,GAoBY,KApBZ;AAAA,SAqBPC,MArBO,GAqBU,EArBV;AAAA,SAsBPC,UAtBO,GAsBe,KAtBf;;AAAA,SAkCPC,WAlCO,GAkCO,YAAY;AAC7B,UAAI,KAAKH,OAAT,EAAkB;AACd;AACH;;AAAA;AACD,WAAKI,UAAL,CAAgB,IAAhB;;AAEA,UAAI;AACA,cAAML,MAAM,GAAG,MAAMJ,GAAG,CAACU,SAAJ,CAAc,KAAKJ,MAAnB,CAArB;AACA,aAAKK,SAAL,CAAeP,MAAf;AACH,OAHD,CAGE,OAAOQ,CAAP,EAAU;AACRC,QAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACH,OALD,SAKU;AACN,aAAKH,UAAL,CAAgB,KAAhB;AACH;;AAAA;AACJ,KAhDa;;AAAA,SA6DPM,OA7DO,GA6DG,CA7DH;AAAA,SA8DPC,OA9DO,GA8DG,CA9DH;AAAA,SA+DPC,OA/DO,GA+DG,CA/DH;AACVpB,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA,SAAKM,cAAL,GAAsBL,QAAQ,CAC1B,MAAM,KAAKQ,MADe,EAE1B,MAAM,KAAKE,WAAL,EAFoB,CAA9B;AAIAT,IAAAA,OAAO,CAAC,MAAM;AACX;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACS,KAXM,CAAP;AAYH;;AAKMmB,EAAAA,SAAS,CAACZ,MAAD,EAAiB;AAC7B,SAAKA,MAAL,GAAcA,MAAd;AACH;;AACMK,EAAAA,SAAS,CAACP,MAAD,EAAwB;AACpC,SAAKA,MAAL,GAAcA,MAAd;AACH;;AAEMK,EAAAA,UAAU,CAACJ,OAAD,EAAmB;AAChC,SAAKA,OAAL,GAAeA,OAAf;AACH;;AAiBMc,EAAAA,OAAO,GAAG;AAAA;;AACb,iCAAKhB,cAAL;AACH;;AACoB,MAAViB,UAAU,GAAG;AACpB,WAAO,KAAKhB,MAAL,CACNiB,KADM,GAENC,IAFM,CAED,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACE,UAAF,GAAeD,CAAC,CAACC,UAF1B,EAGNJ,KAHM,CAGA,CAHA,EAGG,CAHH,CAAP;AAID;;AACe,MAALK,KAAK,GAAE;AACd,WAAO,KAAKtB,MAAL,CAAYuB,MAAZ,CAAoBC,KAAD,IAAwBA,KAAK,CAACF,KAAN,KAAgB,KAAKnB,UAAhE,CAAP;AACH;;AA9DY;AAmElB","sourcesContent":["import { makeAutoObservable, IReactionDisposer, reaction, autorun } from \"mobx\";\nimport * as types from '../declarations/types';\nimport api from \"../services/API\";\n\nexport class Store {\n    public searchDisposer: IReactionDisposer;\n    constructor() {\n        makeAutoObservable(this);\n        this.searchDisposer = reaction(\n            () => this.search,\n            () => this.fetchMovies(),\n        );\n        autorun(() => {    \n           /* if (this.search.includes(\"A\")) {\n                console.log(\"Escolheu a letra A\");\n                this.chooseA = this.chooseA + 1;\n            } else if(this.search.includes(\"D\")){ \n                console.log(\"Escolheu a letra D\")\n                this.chooseD = this.chooseD + 1;\n            } else if (this.search.includes(\"F\")) {  \n                console.log(\"Escolheu a letra F\")\n                this.chooseF = this.chooseF + 1;\n            } */    \n        })\n    };\n    public movies: types.Movie[] = [];\n    public loading: boolean = false;\n    public search: string = '';\n    public adultMovie: boolean = false;\n    public setSearch(search: string) {\n        this.search = search;\n    };\n    public setMovies(movies: types.Movie[]) {\n        this.movies = movies;\n    };\n\n    public setLoading(loading: boolean) {\n        this.loading = loading;\n    };\n\n    public fetchMovies = async () => {\n        if (this.loading) {\n            return;\n        };\n        this.setLoading(true);\n\n        try {\n            const movies = await api.getMovies(this.search);\n            this.setMovies(movies);\n        } catch (e) {\n            console.error(e);\n        } finally {\n            this.setLoading(false);\n        };\n    };\n    public dispose() {\n        this.searchDisposer?.();\n    }\n    public get top5Movies() {\n        return this.movies\n        .slice()\n        .sort((l, r) => l.popularity - r.popularity)\n        .slice(0, 4);\n      }\n      public get adult(){\n          return this.movies.filter((movie: types.Movie) => movie.adult === this.adultMovie)\n      }\n    public chooseF = 0;\n    public chooseA = 0;\n    public chooseD = 0;\n\n};"]},"metadata":{},"sourceType":"module"}