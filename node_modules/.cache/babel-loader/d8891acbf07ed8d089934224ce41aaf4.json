{"ast":null,"code":"import { makeAutoObservable, autorun, reaction } from \"mobx\";\nimport api from \"../services/API\";\nexport class Store {\n  constructor() {\n    this.searchDisposer = void 0;\n    this.movies = [];\n    this.loading = false;\n    this.search = '';\n\n    this.fetchMovies = async () => {\n      if (this.loading) {\n        return;\n      }\n\n      ;\n      this.setLoading(true);\n\n      try {\n        const movies = await api.getMovies(this.search);\n        this.setMovies(movies);\n      } catch (e) {\n        console.error(e);\n      } finally {\n        this.setLoading(false);\n      }\n\n      ;\n    };\n\n    this.chooseF = 0;\n    this.chooseA = 0;\n    this.chooseD = 0;\n    makeAutoObservable(this);\n    this.searchDisposer = reaction(() => this.search, () => this.fetchMovies());\n    autorun(() => {\n      if (this.search.includes(\"A\")) {\n        console.log(\"Escolheu a letra A\");\n        this.chooseA = this.chooseA + 1;\n      } else if (this.search === \"D\") {\n        console.log(\"Escolheu a letra D\");\n        this.chooseD = this.chooseD + 1;\n      } else if (this.search === \"F\") {\n        console.log(\"Escolheu a letra F\");\n        this.chooseF = this.chooseF + 1;\n      }\n    });\n  }\n\n  setSearch(search) {\n    this.search = search;\n  }\n\n  setMovies(movies) {\n    this.movies = movies;\n  }\n\n  setLoading(loading) {\n    this.loading = loading;\n  }\n\n}\n;","map":{"version":3,"sources":["/home/manoel/Codigos/treinamento/aulas/05/reactmovies/src/Home/store.ts"],"names":["makeAutoObservable","autorun","reaction","api","Store","constructor","searchDisposer","movies","loading","search","fetchMovies","setLoading","getMovies","setMovies","e","console","error","chooseF","chooseA","chooseD","includes","log","setSearch"],"mappings":"AAAA,SAASA,kBAAT,EAA6BC,OAA7B,EAAyDC,QAAzD,QAAyE,MAAzE;AAEA,OAAOC,GAAP,MAAgB,iBAAhB;AAEA,OAAO,MAAMC,KAAN,CAAY;AAEfC,EAAAA,WAAW,GAAG;AAAA,SADPC,cACO;AAAA,SAmBPC,MAnBO,GAmBiB,EAnBjB;AAAA,SAoBNC,OApBM,GAoBa,KApBb;AAAA,SAqBNC,MArBM,GAqBW,EArBX;;AAAA,SAkCNC,WAlCM,GAkCQ,YAAY;AAC9B,UAAI,KAAKF,OAAT,EAAkB;AACd;AACH;;AAAA;AACD,WAAKG,UAAL,CAAgB,IAAhB;;AAEI,UAAI;AACA,cAAMJ,MAAM,GAAG,MAAMJ,GAAG,CAACS,SAAJ,CAAc,KAAKH,MAAnB,CAArB;AACA,aAAKI,SAAL,CAAeN,MAAf;AACH,OAHD,CAGE,OAAOO,CAAP,EAAU;AACRC,QAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACH,OALD,SAKU;AACN,aAAKH,UAAL,CAAgB,KAAhB;AACH;;AAAA;AACR,KAhDa;;AAAA,SAiDVM,OAjDU,GAiDA,CAjDA;AAAA,SAkDPC,OAlDO,GAkDG,CAlDH;AAAA,SAmDPC,OAnDO,GAmDG,CAnDH;AACVnB,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA,SAAKM,cAAL,GAAsBJ,QAAQ,CAC1B,MAAM,KAAKO,MADe,EAE1B,MAAM,KAAKC,WAAL,EAFoB,CAA9B;AAIAT,IAAAA,OAAO,CAAC,MAAM;AACV,UAAI,KAAKQ,MAAL,CAAYW,QAAZ,CAAqB,GAArB,CAAJ,EAA+B;AAC3BL,QAAAA,OAAO,CAACM,GAAR,CAAY,oBAAZ;AACA,aAAKH,OAAL,GAAe,KAAKA,OAAL,GAAe,CAA9B;AACH,OAHD,MAGO,IAAG,KAAKT,MAAL,KAAgB,GAAnB,EAAuB;AAC1BM,QAAAA,OAAO,CAACM,GAAR,CAAY,oBAAZ;AACA,aAAKF,OAAL,GAAe,KAAKA,OAAL,GAAe,CAA9B;AACH,OAHM,MAGA,IAAI,KAAKV,MAAL,KAAgB,GAApB,EAAyB;AAC5BM,QAAAA,OAAO,CAACM,GAAR,CAAY,oBAAZ;AACA,aAAKJ,OAAL,GAAe,KAAKA,OAAL,GAAe,CAA9B;AACH;AACJ,KAXM,CAAP;AAYH;;AAKMK,EAAAA,SAAS,CAACb,MAAD,EAAiB;AAC7B,SAAKA,MAAL,GAAcA,MAAd;AACH;;AACMI,EAAAA,SAAS,CAACN,MAAD,EAAwB;AACpC,SAAKA,MAAL,GAAcA,MAAd;AACH;;AAEOI,EAAAA,UAAU,CAACH,OAAD,EAAmB;AACjC,SAAKA,OAAL,GAAeA,OAAf;AACH;;AAlCc;AAsDlB","sourcesContent":["import { makeAutoObservable, autorun, IReactionDisposer, reaction } from \"mobx\";\nimport * as types from '../declarations/types';\nimport api from \"../services/API\";\n\nexport class Store {\n    public searchDisposer: IReactionDisposer;\n    constructor() {\n        makeAutoObservable(this);\n        this.searchDisposer = reaction(\n            () => this.search,\n            () => this.fetchMovies(),\n          );\n        autorun(() => {\n            if (this.search.includes(\"A\")) {\n                console.log(\"Escolheu a letra A\");\n                this.chooseA = this.chooseA + 1;\n            } else if(this.search === \"D\"){ \n                console.log(\"Escolheu a letra D\")\n                this.chooseD = this.chooseD + 1;\n            } else if (this.search === \"F\") {  \n                console.log(\"Escolheu a letra F\")\n                this.chooseF = this.chooseF + 1;\n            } \n        })\n    };\n    public movies: types.Movie[] = [];\n    public  loading: boolean = false;\n    public  search: string = '';\n    \n    public setSearch(search: string) {\n        this.search = search;\n    };\n    public setMovies(movies: types.Movie[]) {\n        this.movies = movies;\n    };\n\n    public  setLoading(loading: boolean) {\n        this.loading = loading;\n    };\n\n    public  fetchMovies = async () => {\n        if (this.loading) {\n            return;\n        };\n        this.setLoading(true);\n\n            try {\n                const movies = await api.getMovies(this.search);\n                this.setMovies(movies);\n            } catch (e) {\n                console.error(e);\n            } finally {\n                this.setLoading(false);\n            };\n    };\n\tpublic chooseF = 0;\n    public chooseA = 0;\n    public chooseD = 0;\n};"]},"metadata":{},"sourceType":"module"}